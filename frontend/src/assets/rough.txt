<template>
    <div class="box">
        <h2>Visual Statistics</h2>
        <div class="stats-container">
          <div class="stat-card" style="height: 400px;">
              <!-- First graph: Number of enrolled students vs Course Name (Bar Chart) -->
              <h3>Enrolled Students per Course</h3>
              <div style="height: 320px;">
                <Bar
                :data="enrollmentData"
                :options="barChartOptions"
                 />
              </div>
          </div>
          <div class="stat-card" style="height: 400px;">
            <!-- Second graph: Number of approved students vs unapproved -->
            <h3>Administration </h3>
            <div style="height: 320px;">
              <Bar
                :data="approvalData"
                :options="stackedBarOptions"
                style="height:50vh"/>
            </div>
          </div>
        </div>
        <br><br>
          <div class="stats-container">
            <div class="stat-card" style="height: 400px;">
                <!-- First graph: Number of enrolled students vs Course Name (Bar Chart) -->
                <h3>Support staff per Course</h3>
                <div style="height: 320px;">
                <Bar
                :data="enrollmentData"
                :options="barChartOptions"
                 />
                </div>
              </div>
              <div class="stat-card" style="height: 400px;">
                <!-- First graph: Number of enrolled students vs Course Name (Bar Chart) -->
                <h3>Support staff per Course</h3>
                <div style="height: 320px;">
                <Bar
                :data="enrollmentData"
                :options="barChartOptions"
                 />
                </div>
            </div>
          </div>
        </div>
    
  </template>
  
  <script>
  import { defineComponent } from 'vue';
  import {
    Chart as ChartJS,
    CategoryScale,
    LinearScale,
    BarElement,
    Title,
    Tooltip,
    Legend
  } from 'chart.js';
  import { Bar } from 'vue-chartjs';
  
  // Register the necessary Chart.js components
  ChartJS.register(
    CategoryScale,
    LinearScale,
    BarElement,
    Title,
    Tooltip,
    Legend
  );
  
  export default defineComponent({
    name: 'Dashboard',
    components: {
      Bar
    },
    data() {
      return {
        // Data for the first bar chart (Enrolled students per course)
        enrollmentData: {
          labels: ['Math', 'Science', 'History'], // Course names
          datasets: [
            {
              label: 'Enrolled Students',
              data: [100, 150, 90, 70, 120], // Number of enrolled students per course
              backgroundColor: '#42A5F5', // Color for the bars
              borderColor: '#1E88E5',
              borderWidth: 5,
            },
          ],
        },
  
        // Options for the first bar chart
        barChartOptions: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Number of Enrolled Students in each Course',
              padding: {
                top: 10,
                bottom: 30,
              },
            },legend: {
              position: 'top',
              labels: {
                boxWidth: 15,
                padding: 10
              }
            },
            tooltip: {
              callbacks: {
                label: function (tooltipItem) {
                  return `${tooltipItem.label}: ${tooltipItem.raw} students`;
                },
              },
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                padding: 5
              }
            },
            x: {
              ticks: {
                padding: 5
              }
            }
          },
          layout: {
            padding: {
              bottom: 10
            }
          },
        },
  
        // Data for the second stacked bar chart (Approved vs Unapproved Students)
        approvalData: {
          labels: ['approved enrollments vs pending', 'approved support staff vs unapproved'],
          datasets: [
            {
              label: 'Approved',
              data: [30, 50], // Approved students
              backgroundColor: '#66BB6A',
              stack: 'approval',
              borderWidth: 5,
            },
            {
              label: 'Unapproved',
              data: [70, 50], // Unapproved students
              backgroundColor: '#EF5350',
              borderWidth: 5,
              stack: 'approval',
            },
          ],
        },
  
        // Options for the second stacked bar chart
        stackedBarOptions: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Approved vs Unapproved Students',
              padding: {
                top: 10,
                bottom: 10
              }
            },
            legend: {
              position: 'top',
              labels: {
                boxWidth: 15,
                padding: 10
              }
            }
          },
          scales: {
            x: {
              stacked: true,
              ticks: {
                padding: 5
              }
            },
            y: {
              stacked: true,
              beginAtZero: true,
              ticks: {
                padding: 5
              }
            }
          },
          layout: {
            padding: {
              bottom: 10
            }
          }
        },
      };
    },
  });
  </script>
  
  <style scoped>
  @import '@/assets/card.css';
  
  
  </style>